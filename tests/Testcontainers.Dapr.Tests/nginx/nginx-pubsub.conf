worker_processes  2;
user              www-data;

events {
    use           epoll;
    worker_connections  128;
}

http {
    server_tokens off;
    include       mime.types;
    charset       utf-8;

    server {
        listen 80 default_server;
        listen [::]:80 default_server;

        location / {
            access_log off;
            default_type application/json;
            return 200 '"healthy"';
        }

        location /receive-event {
            proxy_pass http://receiver-dapr:3500/v1.0/state/mystatestore;
        }

        location /dapr/suscribe {
            access_log off;
            default_type application/json;
            return 200 '[
  {
    "pubsubname": "mypubsub",
    "topic": "some-topic",
    "route": "/receive-event",
    "metadata": {
      "rawPayload": "true",
    }
  }
]';
        }
    }
}